function getGeocode(a,e){geocoder=new google.maps.Geocoder,geocoder.geocode({address:a},function(a,o){o===google.maps.GeocoderStatus.OK?(console.log("status OK",a[0].geometry.location),workingData[e].lat=a[0].geometry.location.A,workingData[e].lng=a[0].geometry.location.F):console.log("status not okay on item:",o)})}function setMarkers(a,e){for(var o=0;o<e.length;o++)var n=e[o],t=new google.maps.LatLng(n.lat,n.lng),r=new google.maps.Marker({position:t,map:a,title:n.name})}function initialize(){var a=document.getElementById("map-canvas"),e={center:new google.maps.LatLng(35.64222479297878,-120.68633100585936),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP},o=new google.maps.Map(a,e);return o}var initialData,initialData_js,storedData=JSON.parse(localStorage.getItem("workingData"));null!==storedData?initialData=storedData:(console.log("No local data found"),initialData=initialData_js);var workingData=[],map,MyViewModel=function(a){"use strict";var e=this;e.places=ko.observableArray(ko.utils.arrayMap(a,function(a){return{name:a.name,url:a.url,addr1:a.addr1,addr2:a.addr2,lat:a.lat,lng:a.lng,infoAry:ko.observableArray(a.infoAry)}})),e.addPlace=function(){e.places.push({name:"",url:"",addr1:"",addr2:"",lat:"",lng:"",infoAry:ko.observableArray()})},e.removePlace=function(a){e.places.remove(a)},e.addInfo=function(a){a.infoAry.push({type:"",infoText:""})},e.removeInfo=function(a){$.each(e.places(),function(){this.infoAry.remove(a)})},e.generateDataArray=function(){workingData=[];for(var a,o,n,t,r,i,l,g=0;g<e.places().length;g++)a=e.places()[g].name,o=e.places()[g].url,n=e.places()[g].addr1,t=e.places()[g].addr2,r=e.places()[g].lat,i=e.places()[g].lng,l=e.places()[g].infoAry(),workingData.push({name:a,url:o,addr1:n,addr2:t,lat:r,lng:i,infoAry:l});localStorage.setItem("workingData",JSON.stringify(workingData));for(var s,d=0;d<workingData.length;d++)s=workingData[d].addr1+" "+workingData[d].addr2,""===workingData[d].lat&&getGeocode(s,d);e.displayText()},e.displayText=function(){for(var a="var initialData_js = \n[\n",e=0;e<workingData.length;e++){a+="  {\n";for(var o in workingData[e])if("infoAry"===o){a+="  "+o+": ",a+="[\n";for(var n=0;n<workingData[e][o].length;n++)a+='    {type: "'+workingData[e][o][n].type+'", ',a+='infoText: "'+workingData[e][o][n].infoText+'"}',a+=",\n";a+="    ]"}else a+="  "+o+': "'+workingData[e][o]+'"',a+=",\n";a+=e<workingData.length-1?"\n  },\n":"\n  }\n"}a+="];";var t=document.getElementById("textarea");return t.value=a,localStorage.setItem("workingData",JSON.stringify(workingData)),a}};ko.applyBindings(new MyViewModel(initialData));